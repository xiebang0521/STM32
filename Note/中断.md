# 中断

## 什么是中断

​		**当CPU执行程序时，突然触发内部或外部中断源，当断当前执行的程序，保存现场（寄存器的值，以及下一个指令的地址），跳转到中断服务程序，执行完中断服务程序后，恢复现场，跳转至程序停止的位置继续执行。**

## 中断的优势

​		**提高CPU的执行效率，**不会像轮询的方式一样，一直占用CPU，实现对突发事件的实时处理。

## 中断的优先级

+ **中断有优先级高低之分，两个中断同时触发，则优先响应高优先级中断，再响应低优先级中断。**
+ **中断嵌套：**高优先级的中断发生，会立即打断当前正在处理的低优先级中断，并首先处理这个高优先级中断。

## 中断的处理流程

1. 中断源触发中断，如外部中断源（按键 PVB USB RTC）、或其他中断源触发中断（UART/I2C/DMA...）；
2. CPU暂停现在执行的程序，保存程序的上下文（寄存器、以及PC(下一条程序的执行指令地址)）在该函数的栈帧里；
3. 程序跳转到对应的中断服务程序（ISR）并执行；中断服务函数执行完后，恢复现场；
4. CPU返回到被中断的位置，执行下一条程序指令；

